
<!DOCTYPE html><html lang="ja"><head><meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1"><title>çµæœ</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@500;700&display=swap" rel="stylesheet">
<style>
:root{--g1:#ff6ec7;--g2:#9e6bff}
*{box-sizing:border-box;margin:0;padding:0}
body{background:linear-gradient(120deg,var(--g1),var(--g2));min-height:100vh;display:flex;flex-direction:column;align-items:center;padding:20px;font-family:'Poppins',sans-serif;overflow-x:hidden}
#card{background:#fff;border-radius:20px;padding:20px;text-align:center;box-shadow:0 10px 30px rgba(0,0,0,.25);max-width:340px;position:relative}
#card img{width:100%;border-radius:15px}
h2{font-size:1.4rem;color:#ff6ec7;margin:1rem 0 .4rem}
p{color:#444;font-size:.95rem;margin-bottom:.4rem}
button,.share{margin-top:.8rem;padding:.7rem 1.4rem;border:none;border-radius:40px;font-weight:600;cursor:pointer;transition:transform .25s;font-size:.9rem;color:#fff}
button:hover,.share:hover{transform:scale(1.07)}
#retry{background:#ff6ec7}
#shot{background:#6a5acd}
.share{background:#1da1f2;text-decoration:none;display:inline-block}
#ln{background:#00c300}
.floatBg span{position:absolute;opacity:.8;font-size:20px;animation:float 8s linear infinite;pointer-events:none}
@keyframes float{0%{transform:translateY(100vh) rotate(0deg);opacity:0}20%{opacity:1}100%{transform:translateY(-120vh) rotate(360deg);opacity:0}}
</style>
</head><body>
<div class="floatBg" id="bg"></div>
<div id="card">
  <img id="img" alt="char">
  <h2 id="title"></h2>
  <p id="desc"></p>
  <p id="lucky"></p>
  <button id="retry">ã‚‚ã†1å›</button>
  <button id="shot">ã‚¹ã‚¯ã‚·ãƒ§</button><br>
  <a id="tw" class="share" target="_blank">Xã§ã‚·ã‚§ã‚¢</a>
  <a id="ln" class="share" target="_blank">LINEã§ã‚·ã‚§ã‚¢</a>
  <audio id="bgm" loop src="bgm.mp3"></audio>
</div>
<canvas id="confetti" style="position:fixed;inset:0;pointer-events:none;"></canvas>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
<script>
const d=[{i:'IMG_0123.png',t:'Healing Angel',d:'ç¹Šç´°ã ã‘ã©èŠ¯ãŒå¼·ã„ã€‚é™ã‹ã«å„ªã—ã•ã‚’å±Šã‘ã‚‹ç™’ã—ç³»ã€‚'},/*â€¦åŒæ§˜ã«16å€‹*/];
while(d.length<16){d.push({i:'IMG_0123.gif',t:'placeholder',d:'desc'})}
const q=new URLSearchParams(location.search);let c=q.get('c');if(c===null)c=Math.random()*16|0;
render(c);
function render(id){
 const o=d[id];
 document.getElementById("img").src = d[id].i;
 document.getElementById('title').textContent=o.t;
 document.getElementById('desc').textContent=o.d;
 document.getElementById('lucky').textContent='ãƒ©ãƒƒã‚­ãƒ¼ã‚¢ã‚¤ãƒ†ãƒ ï¼š'+['ğŸ­','ğŸ’','ğŸ§','ğŸ“¸'][Math.random()*4|0];
 // confetti
 confetti({particleCount:120,spread:70,origin:{y:.6}});
 // save history
 let h=JSON.parse(localStorage.getItem('history')||'[]');h.push(o.t);localStorage.setItem('history',JSON.stringify(h));
 // share
 const u=encodeURIComponent(location.href.split('?')[0]+'?c='+id);
 const txt=encodeURIComponent('ç§ã®æ¨ã—ã‚¿ã‚¤ãƒ—ã¯ã€'+o.t+'ã€ï¼');
 document.getElementById('tw').href=`https://twitter.com/intent/tweet?text=${txt}&url=${u}`;
 document.getElementById('ln').href=`https://social-plugins.line.me/lineit/share?url=${u}`;
}
document.getElementById('retry').onclick=()=>{render(Math.random()*16|0)};
document.getElementById('shot').onclick=()=>{html2canvas(document.getElementById('card')).then(c=>{const a=document.createElement('a');a.download='omikuji.png';a.href=c.toDataURL();a.click();})};
// floating BG
const bg=document.getElementById('bg');['â­','ğŸŒ™','âœ¨','ğŸ’–','ğŸ’«'].forEach(e=>{for(let i=0;i<20;i++){const s=document.createElement('span');s.textContent=e;s.style.left=Math.random()*100+'vw';s.style.fontSize=Math.random()*26+16+'px';s.style.animationDuration=Math.random()*6+6+'s';s.style.animationDelay=Math.random()*4+'s';bg.appendChild(s);}});
// touch to play bgm
document.body.addEventListener('click',()=>document.getElementById('bgm').play(),{once:true});
</script>
</body></html>
